<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<ui:composition
	template="/WEB-INF/templates/layout4/basicTemplate.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:cc="http://java.sun.com/jsf/composite/components">



	<ui:define name="title">Contas a Receber</ui:define>

	<ui:define name="content">

		<style type="text/css">	

		</style>

		<div class="page-content-wrapper">
			<div class="page-content">
				<div class="col-md-12">
					<div style="margin-top:-9px !important" class="portlet box red">
						<div class="portlet-title">
							<div class="caption"><i class="icon-basket-loaded"></i>Consulta Contas a Receber</div>
						</div>
						<div class="portlet-body">
							<div class="table-toolbar">
								<h:form id="form">
									<div class="row">
										<div class="col-md-6">
											<div class="col-md-5">
												<h:outputLabel class="control-label-custom"
													value="Data Recebimento" />
											</div>
											<div class="col-md-7">
												<p:calendar showButtonPanel="false" pattern="dd/MM/yyyy" styleClass="form-control-calendar" 
													showOn="button" locale="pt_BR"	 size="6"
													value="#{contasReceber.filter.filter.dataRecebimentoInicio}" mask="true">  
												</p:calendar>
												<h:outputLabel class="control-label-custom" value="à"
												style="padding:0px 10px;" />
												<p:calendar styleClass="form-control-calendar" pattern="dd/MM/yyyy"
													showOn="button" locale="pt_BR" size="6"
													value="#{contasReceber.filter.filter.dataRecebimentoFinal}" mask="true">
												</p:calendar>
											</div>
										</div>
										<div class="col-md-6">
											<div class="col-md-5">
												<h:outputLabel class="control-label-custom" value="Empresa" />
											</div>
											<div class="col-md-7">
												<h:selectOneMenu  class="form-control form-control-combo-custom" id="empresa" converter="entityConverter"
													value="#{contasReceber.filter.filter.empresa}">
													<f:selectItem itemLabel="Selecione" noSelectionOption="true" />
													<f:selectItems value="#{contasReceber.empresaList}" var="empresa"
														itemLabel="#{empresa.descricao}" />
												</h:selectOneMenu>
											</div>
										</div>
									</div>
									
									<div style="padding: 5px 0px" class="row" />


									<div class="row">
									
										<div class="col-md-6">
											<div class="col-md-5">
												<h:outputLabel class="control-label-custom" value="Descrição" />
											</div>
											<div class="col-md-7">
												<h:inputText maxlength="300" class="form-control form-control-custom" value="#{contasReceber.filter.filter.descricao}" />
											</div>
										</div>
										
										<div class="col-md-6">
											<div class="col-md-5">
												<h:outputLabel class="control-label-custom" value="Conta" />
											</div>
											<div class="col-md-7">
												<h:selectOneMenu  class="form-control form-control-combo-custom" id="contas" converter="entityConverter"
													value="#{contasReceber.filter.filter.conta}">
													<f:selectItem style="margin-top:0px;" itemLabel="Selecione" itemValue="" />
													<f:selectItems value="#{contasReceber.listaContas}" />
												</h:selectOneMenu>
											</div>
										</div>
									</div>
									
									<div style="padding: 15px 0px" class="row" />
	
									
									<div class="row">
										<div class="col-md-12" >
											<div style="padding: 0px 15px;float:right">
												<p:commandButton value="Pesquisar" action="#{contasReceber.carregaContasReceber()}" update="tableContasReceber" ajax="false" process="@form" />
												<p:commandButton value="Limpar" ajax="false" process="@form" update="form" action="#{contasReceber.filter.limpaFiltro()}" />
											</div>
										</div>
									</div>
									
									<p:separator />
									
									<div class="row">
										<div class="col-md-12" >
											<div id="grid">
												<p:button  value="Novo" outcome="contasReceber" />
												<div style="padding: 5px 0px" class="row" />
												
												<p:dataTable var="contaARecebertblOne"	value="#{contasReceber.contasReceberList()}" id="tableContasReceber"
													paginator="true" rows="#{contasReceber.nroRegistrosPorPagina}" paginatorPosition="bottom"
													rowsPerPageTemplate="#{contasReceber.opcoesRegistrosPorPagina}" lazy="true"
													emptyMessage="#{contasReceber.nenhumRegistroEncontrado}">
													
														 <p:column style="width:30px">
												           	<p:rowToggler />
													     </p:column>
													     <p:column>
													     	<h:outputText value="#{contaARecebertblOne.dataVencimento}" />
													     </p:column>
													     
													     <p:rowExpansion>
												            <p:dataTable  id="dois" var="contaAReceber" value="#{contaARecebertblOne.contaReceberList}">
														      
														       <p:column style="width:5%; text-align:center">
																	<p:button  icon="ui-icon-pencil"   outcome="contasReceber">
																		<f:param name="id"  value="#{contaAReceber.id}"></f:param>
																	</p:button>
																</p:column>
																
																<p:column style="width:5%; text-align:center">
																	<p:commandButton icon="ui-icon-close" actionListener="#{contasReceber.excluir(contaAReceber)}" update=":form:tableContasReceber:dois" process="@form">
																		<p:confirm header="Confirmar Exclusão" message="Deseja Excluir o Registro?" icon="ui-icon-alert" />
																	</p:commandButton>
																</p:column>
						
																<p:column>
																	<f:facet name="header">
																		<h:outputText  value="Descrição" />
																	</f:facet>
																	<h:outputText value="#{contaAReceber.descricao}" />
																</p:column>
									
																<p:column style="width:10%;text-align:right">
																	<f:facet name="header">
																		<h:outputText value="Valor Total" />
																	</f:facet>
																	<h:outputText value="#{contaAReceber.valor}">
																		<f:convertNumber minFractionDigits="2" />
																	</h:outputText>
																</p:column>
									
																<p:column>
																	<f:facet name="header">
																		<h:outputText value="Conta" />
																	</f:facet>
																	<h:outputText value="#{contaAReceber.conta.descricao}" />
																</p:column>
									
																<p:column>
																	<f:facet name="header">
																		<h:outputText value="Sacado" />
																	</f:facet>
																	<h:outputText value="#{contaAReceber.empresa.descricao}" />
																</p:column>
									
																<p:column style="width:15%; text-align:center">
																	<f:facet name="header">
																		<h:outputText value="Dt. Recebimento" />
																	</f:facet>
																	<h:outputText value="#{contaAReceber.dataRecebimento}">
																		<f:convertDateTime locale="pt-BR" pattern="dd/MM/yyyy" />
																	</h:outputText>
																</p:column>
									
															</p:dataTable>
												        </p:rowExpansion>
						
												</p:dataTable>
						
											</div>
										</div>
									</div>
									
								</h:form>

							</div>
						</div>
					</div>
					<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">  
						<p:commandButton value="Sim" update=":form:contaARecebertblOne:dois" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
						<p:commandButton value="Não" update=":form:contaARecebertblOne:dois" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>
					</p:confirmDialog>
				</div>
			</div>
		</div>

	</ui:define>
</ui:composition>