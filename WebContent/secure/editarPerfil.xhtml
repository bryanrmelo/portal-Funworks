<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    template="/WEB-INF/templates/basicTemplate.xhtml"
>
    <ui:define name="content">
        <title>Portal - Editar Perfil</title>

        <link rel="stylesheet" href="../resources/css/editarStyle.css" />

        <div class="p-4" style="border: 2px solid black;">
            <div class="container-fluid cor-gradiente" style="border: 2px solid black; margin-bottom: 30px;">
                <div>
                    <h2 class="text-white m-0 p-3">
                        <h:outputText value="Editar perfil > #{alterarSenhaLogado.nomeCompleto()} " />
                    </h2>
                </div>
            </div>
            <p:messages id="messages" showDetail="false" closable="true" />
            <h:form class="p-3 mb-0" enctype="multipart/form-data">
                <!-- Informações principais -->
                <div class="row d-flex">
                    <div class="flex-fill col-10">
                        <div class="row">
                            <div class="form-group col p-0">
                                <div class="form-control border-0 p-0">
                                    <label for="nome" class="col-4 label-stretch text-end pe-3">
                                        <b>Nome completo: *</b>
                                    </label>
                                    <p:inputText name="nome" value="#{editar.usuario.nome}" styleClass="col-8" required="true" requiredMessage="É necessário inserir um nome!" type="text" />
                                </div>
                            </div>
                            <div class="form-group col p-0">
                                <div class="form-control border-0 p-0">
                                    <label for="email" class="col-4 label-stretch text-end pe-3">
                                        <b>E-mail: </b>
                                    </label>
                                    <p:inputText value="#{editar.usuario.email}" styleClass="col-8" type="email" name="email" />
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="form-group col p-0">
                                <div class="form-control border-0 p-0">
                                    <label for="celular" class="col-4 label-stretch text-end pe-3">
                                        <b>Celular: *</b>
                                    </label>
                                    <p:inputMask id="celular" styleClass="col-8" value="#{editar.usuario.celular}" mask="(54) 9 99999999" validateMask="true" required="true" requiredMessage="É necessário inserir um número de celular!" />
                                </div>
                            </div>
                            <div class="form-group col p-0">
                                <div class="form-control border-0 p-0">
                                    <label for="whatsapp" class="col-4 label-stretch text-end pe-3">
                                        <b>Whatsapp: *</b>
                                    </label>
                                    <p:inputMask id="whatsapp" styleClass="col-8" value="#{editar.usuario.whatsapp}" mask="(54) 9 99999999" validateMask="true" required="true" requiredMessage="É necessário inserir um número de Whatsapp!" />
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="form-group col p-0">
                                <div class="form-control border-0 p-0">
                                    <label for="endereço" class="col-2 align-top label-stretch text-end pe-3">
                                        <b>Endereço: *</b>
                                    </label>
                                    <p:inputTextarea
                                        rows="2"
                                        col="12"
                                        value="#{editar.usuario.endereco}"
                                        styleClass="col-10"
                                        required="true"
                                        requiredMessage="É necessário inserir um endereço!"
                                        type="text"
                                        autocomplete="off"
                                        name="endereço"
                                    >
                                        <f:validateLength maximum="60" minimum="0" />
                                    </p:inputTextarea>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="form-group col p-0">
                                <div class="form-control border-0 p-0">
                                    <label for="nascimento" class="col label-stretch text-end pe-3">
                                        <b>Nascimento: *</b>
                                    </label>
                                    <p:inputText value="#{editar.usuario.nascimento}" styleClass="col-4" required="true" requiredMessage="É necessário a data de nascimento!" type="date" autocomplete="off" name="nascimento" />
                                </div>
                            </div>
                            <div class="form-group col p-0">
                                <div class="form-control border-0 p-0">
                                    <label for="genero" class="col text-end pe-3">
                                        <b>Gênero:</b>
                                    </label>
                                    <p:selectOneRadio value="#{editar.usuario.genero}" styleClass="col d-inline align-middle" name="genero">
                                        <f:selectItem itemLabel="Masculino" itemValue="masculino" />
                                        <f:selectItem itemLabel="Feminino" itemValue="feminino" />
                                        <f:selectItem itemLabel="Outro" itemValue="outro" />
                                        <f:selectItem itemLabel="Não informar" itemValue="nao informado" />
                                    </p:selectOneRadio>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="form-group col p-0">
                                <div class="form-control border-0 p-0">
                                    <label for="estadoCivil" class="col-2 label-stretch text-end pe-3">
                                        <b>Estado civil:</b>
                                    </label>
                                    <p:selectOneMenu value="#{editar.usuario.estadoCivil}" styleClass="col borda" name="estadoCivil">
                                        <f:selectItem itemLabel="Não informar" itemValue="" />
                                        <f:selectItem itemLabel="Casado(a)" itemValue="casado" />
                                        <f:selectItem itemLabel="Solteiro(a)" itemValue="solteiro" />
                                        <f:selectItem itemLabel="Separado(a)" itemValue="separado" />
                                        <f:selectItem itemLabel="Divorciado(a)" itemValue="divorciado" />
                                        <f:selectItem itemLabel="Viúvo(a)" itemValue="viuvo" />
                                    </p:selectOneMenu>
                                </div>
                            </div>
                            <div class="form-group col">
                                <div class="form-control border-0 p-0">
                                    <label for="dependentes" class="col label-stretch text-end pe-3">
                                        <b>Dependentes? </b>
                                    </label>
                                    <p:selectOneRadio value="#{editar.usuario.dependentes}" styleClass="col d-inline align-middle" name="dependentes">
                                        <f:selectItem itemLabel="Sim" itemValue="Sim" />
                                        <f:selectItem itemLabel="Não" itemValue="Não" />
                                        <f:ajax render="qtdDependentes" />
                                    </p:selectOneRadio>
                                    <label for="qtdDependentes" class="col label-stretch text-end pe-3 ps-5">
                                        <b>Qntd: </b>
                                    </label>
                                    <p:inputText value="#{editar.usuario.qtdDependentes}" disabled="#{editar.usuario.dependentes eq 'Não'}" type="number" id="qtdDependentes" name="qtdDependentes" class="col" style="width: 50px;" />
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="form-group col-6 p-0">
                                <div class="form-control border-0 p-0">
                                    <label for="admissao" class="col label-stretch text-end pe-3">
                                        <b>Admissão: *</b>
                                    </label>
                                    <p:inputText value="#{editar.usuario.admissao}" styleClass="col" required="true" requiredMessage="É necessário inserir uma data de admissão!" type="date" autocomplete="off" name="admissao" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex-fill col-2">
                        <h:graphicImage value="data:image/jpg;base64,#{editar.getImagemAtual()}" styleClass="mb-3" style="max-width: 160px; max-height: 200px; border: 4px solid black; display: block;" />
                        <p:fileUpload mode="simple" skinSimple="true" label="Carregar imagem" value="#{editar.imagem}" />
                    </div>
                </div>
                <!-- Informações adicionais -->
                <div class="container-fluid mt-3 cor-gradiente" style="border: 2px solid black; margin-bottom: 30px;">
                    <h6 class="text-white m-0 p-1">Informações adicionais</h6>
                </div>
                <div class="row">
                    <div class="form-group col-4">
                        <div class="form-control border-0 p-0">
                            <label for="animais" class="col label-stretch text-end pe-3">
                                <b>Animais de estimação: </b>
                            </label>
                            <p:selectOneRadio value="#{editar.usuario.animais}" styleClass="col d-inline align-middle">
                                <f:selectItem itemLabel="Sim" itemValue="Sim" />
                                <f:selectItem itemLabel="Não" itemValue="Não" />
                                <f:ajax render="obsAnimais qtdAnimais" />
                            </p:selectOneRadio>
                        </div>
                    </div>
                    <div class="form-group col-4">
                        <div class="form-control border-0 p-0">
                            <label for="obsAnimais" class="col text-end pe-3">
                                <b>Obs: </b>
                            </label>
                            <p:inputText value="#{editar.usuario.obsAnimais}" disabled="#{editar.usuario.animais eq 'Não'}" styleClass="col" type="text" id="obsAnimais" name="obsAnimais" />
                        </div>
                    </div>
                    <div class="form-group col">
                        <div class="form-control border-0 p-0" style="width: 150px;">
                            <label for="qtdAnimais" class="col text-end pe-3">
                                <b>Qntd: </b>
                            </label>
                            <p:inputText value="#{editar.usuario.qtdAnimais}" disabled="#{editar.usuario.animais eq 'Não'}" styleClass="col" style="width: 50px;" type="number" id="qtdAnimais" name="qtdAnimais" />
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="form-group col-4">
                        <div class="form-control border-0 p-0">
                            <label for="orientacaoAlimentar" class="col text-end pe-3">
                                <b>Orientação alimentar: </b>
                            </label>
                            <p:selectOneRadio value="#{editar.usuario.orientacaoAlimentar}" styleClass="col d-inline align-middle">
                                <f:selectItem itemLabel="Sim" itemValue="Sim" />
                                <f:selectItem itemLabel="Não" itemValue="Não" />
                                <f:ajax render="obsOrientacaoAlimentar" />
                            </p:selectOneRadio>
                        </div>
                    </div>
                    <div class="form-group col-4">
                        <div class="form-control border-0 p-0">
                            <label for="obsOrientacaoAlimentar" class="col text-end pe-3">
                                <b>Obs: </b>
                            </label>
                            <p:inputText value="#{editar.usuario.obsOrientacaoAlimentar}" disabled="#{editar.usuario.orientacaoAlimentar eq 'Não'}" styleClass="col" type="text" id="obsOrientacaoAlimentar" name="obsOrientacaoAlimentar" />
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="form-group col-4">
                        <div class="form-control border-0 p-0">
                            <label for="alergias" class="col text-end pe-3">
                                <b>Alergias: </b>
                            </label>
                            <p:selectOneRadio value="#{editar.usuario.alergias}" styleClass="col d-inline align-middle">
                                <f:selectItem itemLabel="Sim" itemValue="Sim" />
                                <f:selectItem itemLabel="Não" itemValue="Não" />
                                <f:ajax render="obsAlergias" />
                            </p:selectOneRadio>
                        </div>
                    </div>
                    <div class="form-group col-4">
                        <div class="form-control border-0 p-0">
                            <label for="obsAlergias" class="col text-end pe-3">
                                <b>Obs: </b>
                            </label>
                            <p:inputText value="#{editar.usuario.obsAlergias}" disabled="#{editar.usuario.alergias eq 'Não'}" styleClass="col" type="text" id="obsAlergias" name="obsAlergias" />
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="form-group col-4">
                        <div class="form-control border-0 p-0">
                            <label for="orientacaoAlimentar" class="col text-end pe-3">
                                <b>Intolerâncias: </b>
                            </label>
                            <p:selectOneRadio value="#{editar.usuario.intolerancias}" styleClass="col d-inline align-middle">
                                <f:selectItem itemLabel="Sim" itemValue="Sim" />
                                <f:selectItem itemLabel="Não" itemValue="Não" />
                                <f:ajax render="obsIntolerancias" />
                            </p:selectOneRadio>
                        </div>
                    </div>
                    <div class="form-group col-4">
                        <div class="form-control border-0 p-0">
                            <label for="obsIntolerancias" class="col text-end pe-3">
                                <b>Obs: </b>
                            </label>
                            <p:inputText value="#{editar.usuario.obsIntolerancias}" disabled="#{editar.usuario.intolerancias eq 'Não'}" styleClass="col" type="text" id="obsIntolerancias" name="obsIntolerancias" />
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="form-group col">
                        <div class="form-control border-0 p-0">
                            <label for="preferencias" class="align-top label-stretch text-end pe-3">
                                <b>Preferências: </b>
                            </label>
                            <p:inputTextarea cols="48" rows="2" value="#{editar.usuario.preferencias}" type="text" name="preferencias" validatorMessage="O tamanho máximo desse campo é de 60 caracteres!">
                                <f:validateLength maximum="60" minimum="0" />
                            </p:inputTextarea>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="form-group col">
                        <div class="form-control border-0 p-0">
                            <label for="dicas" class="col-2 align-top label-stretch text-end pe-3">
                                <b>Dicas de Presente de Aniversário: </b>
                            </label>
                            <p:inputTextarea cols="48" rows="2" value="#{editar.usuario.dicas}" styleClass="col" type="text" name="dicas" validatorMessage="O tamanho máximo desse campo é de 60 caracteres!">
                                <f:validateLength maximum="60" minimum="0" />
                            </p:inputTextarea>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-center lista-control mt-4">
                    <h:commandButton styleClass="botoes cor-gradiente justify-content-center text-white m-2" type="submit" value="SALVAR" action="#{editar.editarPerfil()}" onclick="window.location.reload()" />
                    <h:button styleClass="botoes cor-gradiente justify-content-center text-white m-2" value="VOLTAR" outcome="home.xhtml?faces-redirect=true" />
                </div>
            </h:form>
        </div>
    </ui:define>
</ui:composition>
