<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<ui:composition
	template="/WEB-INF/templates/layout4/basicTemplate.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:cc="http://java.sun.com/jsf/composite/components">
	
	<ui:define name="title">Relatório de Resultados</ui:define>

	<ui:define name="content">

	<style type="text/css">
	</style>

		<div class="page-content-wrapper">
			<div class="page-content">
				<div class="col-md-12">
					<div style="margin-top: -9px !important" class="portlet box red">
						<div class="portlet-title">
							<div class="caption">
								<i class="icon-book-open"></i>Relatório de Resultados
							</div>
						</div>
						<div class="portlet-body">
							<div class="table-toolbar"> 
								<h:form id="form">
								
									<p:messages id="messages"  showDetail="false" autoUpdate="true" closable="true" />
									
									<div class="row">
										<div class="col-md-6">
											<div class="col-md-2">
												<h:outputLabel class="control-label-custom" value="Período" />
											</div>
											<div class="col-md-10">
												<p:calendar showButtonPanel="false" pattern="dd/MM/yyyy"
													styleClass="form-control-calendar" showOn="button"
													locale="pt_BR" size="6"
													value="#{relatorioResultados.filter.filter.dataInicial}" mask="true">
												</p:calendar>
												<h:outputLabel class="control-label-custom" value="à"
													style="padding:0px 10px;" />
												<p:calendar styleClass="form-control-calendar"
													pattern="dd/MM/yyyy" showOn="button" locale="pt_BR"
													size="6" value="#{relatorioResultados.filter.filter.dataFinal}" mask="true">
												</p:calendar>
											</div>
										</div>
										<div class="col-md-6">
											<div class="col-md-2" style="text-align:right">
												<h:outputLabel class="control-label-custom" value="Conta" />
											</div>
											<div class="col-md-10">
												<h:selectOneMenu 
													class="form-control form-control-combo-custom" id="contas"
													converter="entityConverter"
													value="#{relatorioResultados.filter.filter.contaSelecionada}">
													<f:selectItem style="margin-top:0px;" itemLabel="Selecione"
														itemValue="" />
													<f:selectItems value="#{relatorioResultados.listaContas}" />
												</h:selectOneMenu>
											</div>
										</div>
									</div>
									
									<div style="padding: 15px 0px" class="row" />
										
									<div class="row">
										<div class="col-md-6">
											<div class="col-md-2">
												<h:outputLabel class="control-label-custom" value="Empresa" />
											</div>
											<div class="col-md-10">
												<ui:repeat var="emp" value="#{relatorioResultados.empresaList}">
													<div style="margin-left:-15px" class="col-md-6 " >
														<p:selectBooleanCheckbox value="#{emp.checkBoxRelValue}" />
														<p:spacer width="5" />
														<h:outputText  value="#{emp.descricao}" />
													</div>
												</ui:repeat>
											</div>
											
										</div>
										<div class="col-md-6">
											<div class="col-md-2" />
											<div class="col-md-10">
												<p:selectBooleanCheckbox value="#{relatorioResultados.filter.filter.valoresConsolidados}" required="true"
													requiredMessage="Exibir valores consolidados obrigatório" />
												<h:outputLabel class="control-label-custom" style="margin-left:5px"
													value="Exibir valores consolidados?" />
											</div>
										</div>
									</div>


									<div style="padding: 15px 0px" class="row" />


									<div class="row">
										<div class="col-md-12">
											<div style="padding: 0px 15px; float: right">
												<p:commandButton value="Pesquisar"
													action="#{relatorioResultados.carregaRelatorio(false)}"
													update="tableContasReceber; pdf" ajax="false" process="@form" onclick="this.form.target=''"/>
												<p:commandButton value="Limpar" ajax="false" process="@form"
													update="form"
													action="#{relatorioResultados.limparFiltro()}" onclick="this.form.target=''"/>
											</div>
										</div>
									</div>

									<div class="col-md-12">
										<p:separator />
									</div>
									
									<div class="row">
									<div class="inline-block popovers" data-container="body" data-trigger="hover" data-placement="bottom" data-content="#{relatorioResultados.aviso}" style="padding: 0px 15px; float: right">
										<div class="col-md-12">
											<p:commandButton id="pdf" value="PDF" ajax="false" icon="ui-icon-document" disabled="#{relatorioResultados.fileOpen}" onclick="this.form.target='_blank'" >
							                    <p:fileDownload contentDisposition="inline" value="#{relatorioResultados.filePdf}" />  
							                </p:commandButton> 
										</div>
									</div>
									</div>
									
									<div class="row">
										<div class="col-md-12" style="margin-top: 1px;">
											<div id="grid">
												<p:outputPanel>
												   <h:outputText value="#{relatorioResultados.html}" escape="false"/>
												</p:outputPanel>
												
												<h:commandLink>
											        <p:dataExporter type="pdf" target=":form:ff" fileName="relatório" pageOnly="true" />
											    </h:commandLink>
											</div>
										</div>
									</div>
									
								</h:form>

							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</ui:define>
</ui:composition>